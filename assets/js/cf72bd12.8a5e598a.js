"use strict";(self.webpackChunkdynamic_installer_doc=self.webpackChunkdynamic_installer_doc||[]).push([[3176],{6629:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"apk-jar-actions/apk-advanced","title":"\ud83d\udd27 Advanced Tool Kits","description":"Advanced tools for APK and JAR patching.","source":"@site/docs/apk-jar-actions/apk-advanced.md","sourceDirName":"apk-jar-actions","slug":"/apk-jar-actions/apk-advanced","permalink":"/DynamicInstaller_Doc/docs/apk-jar-actions/apk-advanced","draft":false,"unlisted":false,"editUrl":"https://github.com/BlassGO/DynamicInstaller_Doc/edit/main/docs/apk-jar-actions/apk-advanced.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"id":"apk-advanced","title":"\ud83d\udd27 Advanced Tool Kits","description":"Advanced tools for APK and JAR patching."},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udee0\ufe0f Patching Tools","permalink":"/DynamicInstaller_Doc/docs/apk-jar-actions/apk-patch"},"next":{"title":"Other Functions","permalink":"/DynamicInstaller_Doc/docs/category/other-functions"}}');var s=n(4848),r=n(8453);const t={sidebar_position:5,id:"apk-advanced",title:"\ud83d\udd27 Advanced Tool Kits",description:"Advanced tools for APK and JAR patching."},l="\ud83d\udd27 APK/JAR Advanced Tool Kits",c={},a=[{value:"dynamic_apktool",id:"dynamic_apktool",level:2},{value:"smali_kit",id:"smali_kit",level:2}];function o(e){const i={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"-apkjar-advanced-tool-kits",children:"\ud83d\udd27 APK/JAR Advanced Tool Kits"})}),"\n",(0,s.jsx)(i.p,{children:"Advanced utilities for APK and JAR patching."}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"dynamic_apktool",children:"dynamic_apktool"}),"\n",(0,s.jsx)(i.p,{children:"Dynamically decompiles or recompiles APKs/JARs with enhanced options."}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Flag"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-decompile (-d)"})}),(0,s.jsx)(i.td,{children:"APK or JAR to decompile"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-recompile (-r)"})}),(0,s.jsx)(i.td,{children:"Folder to recompile"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-add (-a) PATH"})}),(0,s.jsx)(i.td,{children:"Folders/files to add to result (multiple allowed)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-output (-o) DEST"})}),(0,s.jsx)(i.td,{children:"Full path to results"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-sign (-s)"})}),(0,s.jsx)(i.td,{children:"Sign the result (recompile)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-zipalign (-z)"})}),(0,s.jsx)(i.td,{children:"Zipalign the result (recompile)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-preserve-signature (-ps)"})}),(0,s.jsx)(i.td,{children:"Keep original META-INF and AndroidManifest.xml (recompile)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-no-extras"})}),(0,s.jsx)(i.td,{children:"Disable original resource checking/adding (decompile)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-allow-res"})}),(0,s.jsxs)(i.td,{children:["Allow the decompilation of ",(0,s.jsx)(i.code,{children:"res/"})," and ",(0,s.jsx)(i.code,{children:"resources.arsc"}),". This option was introduced for DI Desktop and its use is not recommended on mobile devices"]})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-use-baksmali FILE"})}),(0,s.jsx)(i.td,{children:"Use external baksmali.jar (DEXed) (decompile)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-use-smali FILE"})}),(0,s.jsx)(i.td,{children:"Use external smali.jar (DEXed) (recompile)"})]})]})]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:'# Decompile with added folder\r\ndynamic_apktool -decompile "Test.apk" -o "/sdcard/Test" -add "/sdcard/folder"\r\n\r\n# Decompile with custom baksmali and no extras\r\ndynamic_apktool -no-extras -use-baksmali "$TMP/custom.jar" -decompile "Test.apk" -o "/sdcard/Test" -add "/sdcard/folder"\r\n\r\n# Recompile with additions, signing, and zipalign\r\ndynamic_apktool -recompile "/sdcard/Test" -add "/sdcard/testfolder" -add "/sdcard/Test/original/META-INF" -add "/sdcard/test.txt" -zipalign -sign\n'})}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["You can include ",(0,s.jsx)(i.strong,{children:"Apktool"})," flags directly. Any flag that is not recognized by ",(0,s.jsx)(i.code,{children:"dynamic_apktool"})," will be forwarded to the ongoing Apktool process, whether for decompilation or recompilation."]})}),"\n",(0,s.jsx)(i.admonition,{type:"note",children:(0,s.jsxs)(i.p,{children:["It does not decompile or recompile resources (",(0,s.jsx)(i.code,{children:"res/"}),") by default, only ",(0,s.jsx)(i.code,{children:".dex"})," (smali). This guarantees errors prevention in most cases."]})}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h2,{id:"smali_kit",children:"smali_kit"}),"\n",(0,s.jsx)(i.p,{children:"Manipulates smali files for advanced APK editing."}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Flag"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-dir (-d) FOLDER"})}),(0,s.jsx)(i.td,{children:"Path to find .smali files"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-name (-n) PATTERN"})}),(0,s.jsx)(i.td,{children:"Pattern for .smali file names (Multiple allowed, case sensitive)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-iname (-in) PATTERN"})}),(0,s.jsx)(i.td,{children:"Pattern for .smali file names (Multiple allowed, case insensitive)"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-file (-f) FILE"})}),(0,s.jsx)(i.td,{children:"Specific .smali file to edit"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-method (-m) NAME"})}),(0,s.jsx)(i.td,{children:"Pattern for method name to find"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-replace (-r) CODE"})}),(0,s.jsx)(i.td,{children:"Replace entire method with new code"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-replace-in-method (-rim) OLD NEW"})}),(0,s.jsx)(i.td,{children:"Replace OLD string with NEW in method"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-delete-in-method (-dim) TEXT"})}),(0,s.jsx)(i.td,{children:"Remove TEXT from method"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-remake (-re) CODE"})}),(0,s.jsx)(i.td,{children:"Replace method\u2019s internal content"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-after-line (-al) LINE TEXT"})}),(0,s.jsx)(i.td,{children:"Add TEXT after LINE in method"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-before-line (-bl) LINE TEXT"})}),(0,s.jsx)(i.td,{children:"Add TEXT before LINE in method"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-limit (-l) N"})}),(0,s.jsx)(i.td,{children:"Limit number of results"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-check (-c)"})}),(0,s.jsx)(i.td,{children:"Report modified files or no changes"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-delete-method (-dm)"})}),(0,s.jsx)(i.td,{children:"Remove entire method"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-print-path (-pp)"})}),(0,s.jsx)(i.td,{children:"Print paths of .smali files found"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"-recursive"})}),(0,s.jsxs)(i.td,{children:["Enables the ",(0,s.jsx)(i.code,{children:"-rim"}),", ",(0,s.jsx)(i.code,{children:"-dim"}),", ",(0,s.jsx)(i.code,{children:"-al"}),", and ",(0,s.jsx)(i.code,{children:"-bl"})," flags to apply changes to all possible matches, rather than just the first one (the default behavior)"]})]})]})]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:'REPLACE="\r\n.method public static isTima()Z\r\n    .locals 1\r\n    const/4 v0, 0x1\r\n    return v0\r\n.end method\r\n"\r\nREMAKE="\r\n    .locals 1\r\n    const/4 v0, 0x4\r\n    return v0\r\n"\r\n\r\n# Replace in specific file\r\nsmali_kit -check -method "isTima" -file "/sdcard/file.smali" -replace "$REPLACE"\r\n\r\n# Search for a .smali by NAME (case sensitive)\r\nsmali_kit -check -method "isTima" -dir "FOLDER" -name "NAME.smali" -replace "$REPLACE"\r\n\r\n# Search for a .smali by NAME (case insensitive)\r\nsmali_kit -check -method "isTima" -dir "FOLDER" -iname "name.smali" -replace "$REPLACE"\r\n\r\n# Search for a .smali by PARTIAL NAME\r\n# It is not necessary to know the exact name, just a PART\r\nsmali_kit -method "isTima" -d "FOLDER" -name "PART*" -replace "$REPLACE"\r\nsmali_kit -method "isTima" -d "FOLDER" -name "*PART*" -remake "$REMAKE"\r\n\r\n# This may be more accurate\r\n# Although the name is partial, the file extension should be .smali\r\nsmali_kit -method "isTima" -d "FOLDER" -name "PART*.smali" -delete-method\r\n\r\n# Search for .smali files with multiple possible NAMES or PARTIAL NAMES (case sensitive or insensitives)\r\nsmali_kit -method "isTima" -d "FOLDER" -iname "NAME.smali" -iname "PART*.smali" -name "*PART2*.smali" -delete-method\r\n\r\n# Replace string in method\r\nsmali_kit -method "isTima" -dir "FOLDER" -name "NAME.smali" -replace-in-method "const/4 v0, 0x1" "const/4 v0, 0x0"\r\n\r\n# Remake method content\r\nsmali_kit -method "isTima" -d "FOLDER" -name "NAME.smali" -remake "$REMAKE"\r\n\r\n# Simply get the paths of the .smali files that contain a valid method\r\nfound_paths=$(smali_kit -print-path -method "isTima" -d "FOLDER" -name "NAME.smali")\n'})}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["If you don't specify ",(0,s.jsx)(i.code,{children:"-name"})," when specifying a directory (",(0,s.jsx)(i.code,{children:"-dir"}),"), all files in the directory will be read to search for the method. This is much slower than filtering the search with multiple full or partial file names."]})}),"\n",(0,s.jsx)(i.admonition,{type:"note",children:(0,s.jsx)(i.p,{children:"Only Search and reconstruction of Smali Code is ensured with basic principles, an analysis of the new code at the syntax level is not carried out."})})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>l});var d=n(6540);const s={},r=d.createContext(s);function t(e){const i=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),d.createElement(r.Provider,{value:i},e.children)}}}]);