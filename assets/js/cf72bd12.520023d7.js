"use strict";(self.webpackChunkdynamic_installer_doc=self.webpackChunkdynamic_installer_doc||[]).push([[3176],{1657:(e,d,n)=>{n.r(d),n.d(d,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"apk-jar-actions/apk-advanced","title":"\ud83d\udd27 Advanced Tool Kits","description":"Advanced tools for APK and JAR patching.","source":"@site/docs/apk-jar-actions/apk-advanced.md","sourceDirName":"apk-jar-actions","slug":"/apk-jar-actions/apk-advanced","permalink":"/DynamicInstaller_Doc/docs/apk-jar-actions/apk-advanced","draft":false,"unlisted":false,"editUrl":"https://github.com/BlassGO/DynamicInstaller_Doc/edit/main/docs/apk-jar-actions/apk-advanced.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"id":"apk-advanced","title":"\ud83d\udd27 Advanced Tool Kits","description":"Advanced tools for APK and JAR patching."},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udee0\ufe0f Patching Tools","permalink":"/DynamicInstaller_Doc/docs/apk-jar-actions/apk-patch"},"next":{"title":"Other Functions","permalink":"/DynamicInstaller_Doc/docs/category/other-functions"}}');var r=n(4848),s=n(8453);const t={sidebar_position:5,id:"apk-advanced",title:"\ud83d\udd27 Advanced Tool Kits",description:"Advanced tools for APK and JAR patching."},c="\ud83d\udd27 APK/JAR Advanced Tool Kits",l={},a=[{value:"dynamic_apktool",id:"dynamic_apktool",level:2},{value:"smali_kit",id:"smali_kit",level:2}];function o(e){const d={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.header,{children:(0,r.jsx)(d.h1,{id:"-apkjar-advanced-tool-kits",children:"\ud83d\udd27 APK/JAR Advanced Tool Kits"})}),"\n",(0,r.jsx)(d.p,{children:"Advanced utilities for APK and JAR patching."}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h2,{id:"dynamic_apktool",children:"dynamic_apktool"}),"\n",(0,r.jsx)(d.p,{children:"Dynamically decompiles or recompiles APKs/JARs with enhanced options."}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Flag"}),(0,r.jsx)(d.th,{children:"Description"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-decompile (-d)"})}),(0,r.jsx)(d.td,{children:"APK or JAR to decompile"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-recompile (-r)"})}),(0,r.jsx)(d.td,{children:"Folder to recompile"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-framework (-f) FILE"})}),(0,r.jsx)(d.td,{children:"Framework-res.apk to use"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-add (-a) PATH"})}),(0,r.jsx)(d.td,{children:"Folders/files to add to result (multiple allowed)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-command (-c) OPT"})}),(0,r.jsx)(d.td,{children:"Extra apktool.jar options"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-output (-o) DEST"})}),(0,r.jsx)(d.td,{children:"Full path to results"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-sign (-s)"})}),(0,r.jsx)(d.td,{children:"Sign the result (recompile)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-zipalign (-z)"})}),(0,r.jsx)(d.td,{children:"Zipalign the result (recompile)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-preserve-signature (-ps)"})}),(0,r.jsx)(d.td,{children:"Keep original META-INF and AndroidManifest.xml (recompile)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-no-api"})}),(0,r.jsx)(d.td,{children:"Disable automatic device API specification"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-no-extras"})}),(0,r.jsx)(d.td,{children:"Disable original resource checking/adding (decompile)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-use-baksmali FILE"})}),(0,r.jsx)(d.td,{children:"Use external baksmali.jar (DEXed) (decompile)"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-use-smali FILE"})}),(0,r.jsx)(d.td,{children:"Use external smali.jar (DEXed) (recompile)"})]})]})]}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-bash",children:'# Decompile with added folder\r\ndynamic_apktool -decompile "Test.apk" -o "/sdcard/Test" -add "/sdcard/folder"\r\n\r\n# Decompile with custom baksmali and no extras\r\ndynamic_apktool -no-extras -use-baksmali "$TMP/custom.jar" -decompile "Test.apk" -o "/sdcard/Test" -add "/sdcard/folder"\r\n\r\n# Recompile with additions, signing, and zipalign\r\ndynamic_apktool -recompile "/sdcard/Test" -add "/sdcard/testfolder" -add "/sdcard/Test/original/META-INF" -add "/sdcard/test.txt" -zipalign -sign\n'})}),"\n",(0,r.jsx)(d.admonition,{type:"note",children:(0,r.jsxs)(d.p,{children:["It does not decompile or recompile resources (",(0,r.jsx)(d.code,{children:"res/"}),") by default, only ",(0,r.jsx)(d.code,{children:".dex"})," (smali). This guarantees errors prevention in most cases."]})}),"\n",(0,r.jsx)(d.hr,{}),"\n",(0,r.jsx)(d.h2,{id:"smali_kit",children:"smali_kit"}),"\n",(0,r.jsx)(d.p,{children:"Manipulates smali files for advanced APK editing."}),"\n",(0,r.jsxs)(d.table,{children:[(0,r.jsx)(d.thead,{children:(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.th,{children:"Flag"}),(0,r.jsx)(d.th,{children:"Description"})]})}),(0,r.jsxs)(d.tbody,{children:[(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-dir (-d) FOLDER"})}),(0,r.jsx)(d.td,{children:"Path to find .smali files"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-file (-f) FILE"})}),(0,r.jsx)(d.td,{children:"Specific .smali file to edit"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-method (-m) NAME"})}),(0,r.jsx)(d.td,{children:"Pattern for method name to find"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-replace (-r) CODE"})}),(0,r.jsx)(d.td,{children:"Replace entire method with new code"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-replace-in-method (-rim) OLD NEW"})}),(0,r.jsx)(d.td,{children:"Replace OLD string with NEW in method"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-delete-in-method (-dim) TEXT"})}),(0,r.jsx)(d.td,{children:"Remove TEXT from method"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-remake (-re) CODE"})}),(0,r.jsx)(d.td,{children:"Replace method\u2019s internal content"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-after-line (-al) LINE TEXT"})}),(0,r.jsx)(d.td,{children:"Add TEXT after LINE in method"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-before-line (-bl) LINE TEXT"})}),(0,r.jsx)(d.td,{children:"Add TEXT before LINE in method"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-name (-n) PATTERN"})}),(0,r.jsx)(d.td,{children:"Pattern for .smali file names"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-static-name (-sn) NAME"})}),(0,r.jsx)(d.td,{children:"Exact .smali file name"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-limit (-l) N"})}),(0,r.jsx)(d.td,{children:"Limit number of results"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-check (-c)"})}),(0,r.jsx)(d.td,{children:"Report modified files or no changes"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-delete-method (-dm)"})}),(0,r.jsx)(d.td,{children:"Remove entire method"})]}),(0,r.jsxs)(d.tr,{children:[(0,r.jsx)(d.td,{children:(0,r.jsx)(d.code,{children:"-print-path (-pp)"})}),(0,r.jsx)(d.td,{children:"Print paths of .smali files with method"})]})]})]}),"\n",(0,r.jsx)(d.pre,{children:(0,r.jsx)(d.code,{className:"language-bash",children:'# Replace method\r\nREPLACE="\r\n.method public static isTima()Z\r\n    .locals 1\r\n    const/4 v0, 0x1\r\n    return v0\r\n.end method\r\n"\r\nsmali_kit -check -method "isTima" -d "FOLDER" -replace "$REPLACE"\r\n\r\n# Replace string in method\r\nsmali_kit -method "isTima" -dir "FOLDER" -replace-in-method "const/4 v0, 0x1" "const/4 v0, 0x0"\r\n\r\n# Remake method content\r\nTEST="\r\n    .locals 1\r\n    const/4 v0, 0x4\r\n    return v0\r\n"\r\nsmali_kit -method "isTima" -d "FOLDER" -remake "$TEST"\r\n\r\n# Replace in specific file\r\nsmali_kit -method "isTima" -f "file.smali" -replace "$REPLACE"\n'})}),"\n",(0,r.jsx)(d.admonition,{type:"note",children:(0,r.jsx)(d.p,{children:"Only Search and reconstruction of Smali Code is ensured with basic principles, an analysis of the new code at the syntax level is not carried out."})})]})}function h(e={}){const{wrapper:d}={...(0,s.R)(),...e.components};return d?(0,r.jsx)(d,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,d,n)=>{n.d(d,{R:()=>t,x:()=>c});var i=n(6540);const r={},s=i.createContext(r);function t(e){const d=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(d):{...d,...e}}),[d,e])}function c(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(s.Provider,{value:d},e.children)}}}]);