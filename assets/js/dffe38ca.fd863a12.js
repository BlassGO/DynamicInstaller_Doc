"use strict";(self.webpackChunkdynamic_installer_doc=self.webpackChunkdynamic_installer_doc||[]).push([[5607],{6264:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"environment/updater-configs","title":"\u2699\ufe0f Configs","description":"Configuring the environment.","source":"@site/docs/environment/updater-configs.md","sourceDirName":"environment","slug":"/environment/updater-configs","permalink":"/DynamicInstaller_Doc/docs/environment/updater-configs","draft":false,"unlisted":false,"editUrl":"https://github.com/BlassGO/DynamicInstaller_Doc/edit/main/docs/environment/updater-configs.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"id":"updater-configs","title":"\u2699\ufe0f Configs","description":"Configuring the environment."},"sidebar":"tutorialSidebar","previous":{"title":"Environment","permalink":"/DynamicInstaller_Doc/docs/category/environment"},"next":{"title":"\ud83d\udcd0 Actions Scope","permalink":"/DynamicInstaller_Doc/docs/environment/extensions-logic"}}');var i=s(4848),o=s(8453);const a={sidebar_position:1,id:"updater-configs",title:"\u2699\ufe0f Configs",description:"Configuring the environment."},t="\u2699\ufe0f Configs",d={},l=[{value:"devices (off)",id:"devices-off",level:3},{value:"devices_alert (on)",id:"devices_alert-on",level:3},{value:"apex_mount (off)",id:"apex_mount-off",level:3},{value:"dalvik_memory (800M)",id:"dalvik_memory-800m",level:3},{value:"framework_res",id:"framework_res",level:3},{value:"import_addons (off)",id:"import_addons-off",level:3},{value:"magisk_support (on)",id:"magisk_support-on",level:3},{value:"overwrite_symlinks (off)",id:"overwrite_symlinks-off",level:3},{value:"extraction_speed (5M)",id:"extraction_speed-5m",level:3},{value:"ensure_rw (on)",id:"ensure_rw-on",level:3},{value:"off_readonly (&quot;&quot;)",id:"off_readonly-",level:3},{value:"permissions",id:"permissions",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\ufe0f-configs",children:"\u2699\ufe0f Configs"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/introduction#how-does-it-work",children:"updater-script"})," also controls how your installer behaves. Use ",(0,i.jsx)(n.code,{children:"setdefault"})," commands to customize it."]}),"\n",(0,i.jsx)(n.p,{children:"By default:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'setdefault   magisk_support       on\r\nsetdefault   ensure_rw            on\r\nsetdefault   import_addons        off\r\nsetdefault   apex_mount           off\r\nsetdefault   overwrite_symlinks   off\r\nsetdefault   devices              off\r\nsetdefault   devices_alert        on\r\nsetdefault   dalvik_memory        800M\r\nsetdefault   extraction_speed     4M\r\nsetdefault   off_readonly         ""\r\nsetdefault   framework_res        "/system/framework/framework-res.apk"\r\nsetdefault   permissions          "0:0:0755:0644"\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["All ",(0,i.jsx)(n.code,{children:"setdefault"})," reads occur long before installation. It is advisable to place them at the beginning of the script (as they come by default) to guarantee fast reading and avoid errors."]}),"\n",(0,i.jsxs)(n.li,{children:["Although some are modifiable during execution (such as ",(0,i.jsx)(n.code,{children:"permissions"}),") for flexibility, others that influence directly in the initial execution configuration only consider the value of the first definition within the script."]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"devices-off",children:"devices (off)"}),"\n",(0,i.jsxs)(n.p,{children:["Restrict installation to specific devices (code names or models, separated by ",(0,i.jsx)(n.code,{children:":"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'setdefault devices "a51nsxx:Pixel 2"  # Only Galaxy A51 and Pixel 2\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"If a supported device is not found, then the installation is aborted early and also, an alert will be printed on the user screen who lists the supported devices."})}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.p,{children:["To know what device it was found, the ",(0,i.jsx)(n.code,{children:"DEVICE"})," variable can be used. This contains the code or model according to the list defined in the ",(0,i.jsx)(n.code,{children:" devices"})," configuration."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'setdefault devices "ginkgo:a51"\r\n\r\nif is_equal $DEVICE "ginkgo"; then\r\n   # Actions for ginkgo\r\nelif is_equal $DEVICE "a51"; then\r\n   # Actions for a51\r\nfi\r\n\n'})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"devices_alert-on",children:"devices_alert (on)"}),"\n",(0,i.jsxs)(n.p,{children:["Enable (",(0,i.jsx)(n.code,{children:"on"}),") or disable (",(0,i.jsx)(n.code,{children:"off"}),") abort on unsupported devices."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'setdefault devices "SM-A515F"\r\nsetdefault devices_alert off\r\n\r\nif undefined DEVICE; then\r\n   ui_print "Device not supported!"\r\n   abort\r\nfi\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["It requires manually checking the ",(0,i.jsx)(n.code,{children:"DEVICE"})," variable to identify when a supported device was not found."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"apex_mount-off",children:"apex_mount (off)"}),"\n",(0,i.jsxs)(n.p,{children:["Enable (",(0,i.jsx)(n.code,{children:"on"}),") or disable (",(0,i.jsx)(n.code,{children:"off"}),") ",(0,i.jsx)(n.code,{children:"/apex"})," mounting with ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/general-actions/mount#mount_all",children:(0,i.jsx)(n.code,{children:"mount_all"})})," action."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"setdefault apex_mount on  # Mount /apex for dalvikvm tasks\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["It is necessary when you want to try to use ",(0,i.jsx)(n.code,{children:"dalvikvm"}),". For example for actions such as ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/apk-jar-actions/apk-advanced#dynamic_apktool",children:(0,i.jsx)(n.code,{children:"dynamic_apktool"})})," / ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/apk-jar-actions/apk-patch#sign",children:(0,i.jsx)(n.code,{children:"sign"})})," / ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/general-actions/execution#run_jar",children:(0,i.jsx)(n.code,{children:"run_jar"})})," from recovery mode."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"dalvik_memory-800m",children:"dalvik_memory (800M)"}),"\n",(0,i.jsxs)(n.p,{children:["Limit or expand the memory that is available for ",(0,i.jsx)(n.code,{children:"dalvikvm"}),". This affects functions such as ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/apk-jar-actions/apk-advanced#dynamic_apktool",children:(0,i.jsx)(n.code,{children:"dynamic_apktool"})})," / ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/apk-jar-actions/apk-patch#sign",children:(0,i.jsx)(n.code,{children:"sign"})})," / ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/general-actions/execution#run_jar",children:(0,i.jsx)(n.code,{children:"run_jar"})}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"setdefault dalvik_memory 1000M  # Expand\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"framework_res",children:"framework_res"}),"\n",(0,i.jsxs)(n.p,{children:["Defines one or more framework .APK files (separated by ",(0,i.jsx)(n.code,{children:":"}),") for ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/apk-jar-actions/apk-advanced#dynamic_apktool",children:(0,i.jsx)(n.code,{children:"dynamic_apktool"})})," to use by default. These are installed on the first use only and are retained for all subsequent uses"]}),"\n",(0,i.jsxs)(n.p,{children:["Default: ",(0,i.jsx)(n.code,{children:"/system/framework/framework-res.apk"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'setdefault framework_res "/system/framework/framework-res.apk:/system/framework/extra-fw.apk"\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"import_addons-off",children:"import_addons (off)"}),"\n",(0,i.jsxs)(n.p,{children:["Import ",(0,i.jsx)(n.code,{children:".sh"})," files from ",(0,i.jsx)(n.code,{children:"META-INF/addons"})," (",(0,i.jsx)(n.code,{children:"on"})," or ",(0,i.jsx)(n.code,{children:"off"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"setdefault import_addons on  # Load all addons alphabetically\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"magisk_support-on",children:"magisk_support (on)"}),"\n",(0,i.jsxs)(n.p,{children:["Control Module (Magisk/KSU) usage: ",(0,i.jsx)(n.code,{children:"on"})," (dual mode), ",(0,i.jsx)(n.code,{children:"off"})," (recovery only), ",(0,i.jsx)(n.code,{children:"force"})," (Module only)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"setdefault magisk_support off  # Use updater-script only\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"force"}),": Installs via Recovery using ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/environment/as-module",children:(0,i.jsx)(n.code,{children:"customize.sh"})}),", like a regular Magisk module. Only for Magisk, other Managers don't support this."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"off"}),": Installs via Managers (like Magisk/KSU) using ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/introduction#how-does-it-work",children:(0,i.jsx)(n.code,{children:"updater-script"})}),". The module environment (",(0,i.jsx)(n.code,{children:"$MODPATH"}),", etc.) is not loaded and it won't be registered as a module, good for one-time scripts."]}),"\n"]})}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["Even with ",(0,i.jsx)(n.strong,{children:"off"}),", Magisk v28+ and KernelSU will still register it as a module and load the environment (",(0,i.jsx)(n.code,{children:"$MODPATH"}),", etc.). This is unavoidable due to their strict Module management, check ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/environment/as-module#kernelsu--magisk-v28-support",children:"here"}),"."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"overwrite_symlinks-off",children:"overwrite_symlinks (off)"}),"\n",(0,i.jsxs)(n.p,{children:["Allow (",(0,i.jsx)(n.code,{children:"on"}),") or skip (",(0,i.jsx)(n.code,{children:"off"}),") symlink replacement during extractions with ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/general-actions/extract#package_extract_file",children:(0,i.jsx)(n.code,{children:"package_extract_file"})})," and ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/general-actions/extract#package_extract_dir",children:(0,i.jsx)(n.code,{children:"package_extract_dir"})})," actions."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"setdefault overwrite_symlinks on\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Ensures that only the symlink itself is overwritten, and not the source file (in any extraction case)."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"extraction_speed-5m",children:"extraction_speed (5M)"}),"\n",(0,i.jsxs)(n.p,{children:["Set ZIP extraction speed only when performing these actions: ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/install-actions/install-bins#update",children:(0,i.jsx)(n.code,{children:"update"})})," / ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/general-actions/edify#write_raw_image",children:(0,i.jsx)(n.code,{children:"write_raw_image"})})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"setdefault extraction_speed 5M\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"ensure_rw-on",children:"ensure_rw (on)"}),"\n",(0,i.jsxs)(n.p,{children:["Require RW mounts (",(0,i.jsx)(n.code,{children:"on"}),") or allow RO (",(0,i.jsx)(n.code,{children:"off"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"setdefault ensure_rw off  # Allow read-only systems\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"off_readonly-",children:'off_readonly ("")'}),"\n",(0,i.jsxs)(n.p,{children:["It allows deactivation of the ",(0,i.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/environment/readonly",children:(0,i.jsx)(n.code,{children:"Read/Only"})})," protection for specific native functions or variables (specified by name, separated by ",(0,i.jsx)(n.code,{children:":"}),") during execution, enabling their replacement."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'setdefault off_readonly "TMP:ui_print"  # Allow its re-definition\r\n\r\nTMP="My custom value"\r\n\r\nui_print() {\r\n    echo My custom ui_print function\r\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"permissions",children:"permissions"}),"\n",(0,i.jsx)(n.p,{children:"Permissions used by default in all native functions that alter/generate files or generate folders."}),"\n",(0,i.jsxs)(n.p,{children:["Default: ",(0,i.jsx)(n.code,{children:"0:0:0755:0644"}),"  (User:Group:Folder",":File",")"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# New folders: 0 0 755 permissions\r\n# New files: 0 0 777 permissions\r\nsetdefault permissions "0:0:755:777"\r\npackage_extract_dir tools "$TMP/tools"\r\n\r\n# New folders: 0 0 755 permissions\r\n# New files: 0 0 644 permissions\r\nsetdefault permissions "0:0:755:644"\r\npackage_extract_dir system /system\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>t});var r=s(6540);const i={},o=r.createContext(i);function a(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);