"use strict";(self.webpackChunkdynamic_installer_doc=self.webpackChunkdynamic_installer_doc||[]).push([[5607],{3612:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"environment/updater-configs","title":"\u2699\ufe0f Configs","description":"Configuring the environment.","source":"@site/docs/environment/updater-configs.md","sourceDirName":"environment","slug":"/environment/updater-configs","permalink":"/DynamicInstaller_Doc/docs/environment/updater-configs","draft":false,"unlisted":false,"editUrl":"https://github.com/BlassGO/DynamicInstaller_Doc/edit/main/docs/environment/updater-configs.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"id":"updater-configs","title":"\u2699\ufe0f Configs","description":"Configuring the environment."},"sidebar":"tutorialSidebar","previous":{"title":"Environment","permalink":"/DynamicInstaller_Doc/docs/category/environment"},"next":{"title":"\ud83d\udcd0 Extensions","permalink":"/DynamicInstaller_Doc/docs/environment/extensions-logic"}}');var o=s(4848),r=s(8453);const t={sidebar_position:1,id:"updater-configs",title:"\u2699\ufe0f Configs",description:"Configuring the environment."},d="\u2699\ufe0f Configs",l={},a=[{value:"devices (off)",id:"devices-off",level:3},{value:"devices_alert (on)",id:"devices_alert-on",level:3},{value:"apex_mount (off)",id:"apex_mount-off",level:3},{value:"dalvik_memory (800M)",id:"dalvik_memory-800m",level:3},{value:"import_addons (off)",id:"import_addons-off",level:3},{value:"magisk_support (on)",id:"magisk_support-on",level:3},{value:"overwrite_symlinks (off)",id:"overwrite_symlinks-off",level:3},{value:"extraction_speed (5M)",id:"extraction_speed-5m",level:3},{value:"ensure_rw (on)",id:"ensure_rw-on",level:3},{value:"off_readonly (&quot;&quot;)",id:"off_readonly-",level:3},{value:"permissions",id:"permissions",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"\ufe0f-configs",children:"\u2699\ufe0f Configs"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.a,{href:"/DynamicInstaller_Doc/docs/introduction#how-does-it-work",children:"updater-script"})," also controls how your installer behaves. Use ",(0,o.jsx)(n.code,{children:"setdefault"})," commands to customize it."]}),"\n",(0,o.jsx)(n.p,{children:"By default:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'setdefault   magisk_support       on\r\nsetdefault   ensure_rw            on\r\nsetdefault   import_addons        off\r\nsetdefault   apex_mount           off\r\nsetdefault   overwrite_symlinks   off\r\nsetdefault   devices              off\r\nsetdefault   devices_alert        on\r\nsetdefault   dalvik_memory        800M\r\nsetdefault   extraction_speed     4M\r\nsetdefault   off_readonly         ""\r\nsetdefault   permissions          "0:0:0755:0644"\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["All ",(0,o.jsx)(n.code,{children:"setdefault"})," reads occur long before installation. It is advisable to place them at the beginning of the script (as they come by default) to guarantee fast reading and avoid errors."]}),"\n",(0,o.jsxs)(n.li,{children:["Although some are modifiable during execution (such as ",(0,o.jsx)(n.code,{children:"permissions"}),") for flexibility, others that influence directly in the initial execution configuration only consider the value of the first definition within the script."]}),"\n"]})}),"\n",(0,o.jsx)(n.h3,{id:"devices-off",children:"devices (off)"}),"\n",(0,o.jsxs)(n.p,{children:["Restrict installation to specific devices (code names or models, separated by ",(0,o.jsx)(n.code,{children:":"}),")."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'setdefault devices "a51nsxx:Pixel 2"  # Only Galaxy A51 and Pixel 2\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"If a supported device is not found, then the installation is aborted early and also, an alert will be printed on the user screen who lists the supported devices."})}),"\n",(0,o.jsxs)(n.admonition,{type:"tip",children:[(0,o.jsxs)(n.p,{children:["To know what device it was found, the ",(0,o.jsx)(n.code,{children:"DEVICE"})," variable can be used. This contains the code or model according to the list defined in the ",(0,o.jsx)(n.code,{children:" devices"})," configuration."]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'setdefault devices "ginkgo:a51"\r\n\r\nif is_equal $DEVICE "ginkgo"; then\r\n   # Actions for ginkgo\r\nelif is_equal $DEVICE "a51"; then\r\n   # Actions for a51\r\nfi\r\n\n'})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"devices_alert-on",children:"devices_alert (on)"}),"\n",(0,o.jsxs)(n.p,{children:["Enable (",(0,o.jsx)(n.code,{children:"on"}),") or disable (",(0,o.jsx)(n.code,{children:"off"}),") abort on unsupported devices."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'setdefault devices "SM-A515F"\r\nsetdefault devices_alert off\r\n\r\nif undefined DEVICE; then\r\n   ui_print "Device not supported!"\r\n   abort\r\nfi\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["It requires manually checking the ",(0,o.jsx)(n.code,{children:"DEVICE"})," variable to identify when a supported device was not found."]})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"apex_mount-off",children:"apex_mount (off)"}),"\n",(0,o.jsxs)(n.p,{children:["Enable (",(0,o.jsx)(n.code,{children:"on"}),") or disable (",(0,o.jsx)(n.code,{children:"off"}),") ",(0,o.jsx)(n.code,{children:"/apex"})," mounting with ",(0,o.jsx)(n.code,{children:"mount_all"})," action."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"setdefault apex_mount on  # Mount /apex for dalvikvm tasks\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["It is necessary when you want to try to use ",(0,o.jsx)(n.code,{children:"dalvikvm"}),". For example for actions such as ",(0,o.jsx)(n.code,{children:"apktool"})," / ",(0,o.jsx)(n.code,{children:"sign"})," / ",(0,o.jsx)(n.code,{children:"run_jar"})," from recovery mode."]})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"dalvik_memory-800m",children:"dalvik_memory (800M)"}),"\n",(0,o.jsxs)(n.p,{children:["Limit or expand the memory that is available for ",(0,o.jsx)(n.code,{children:"dalvikvm"}),". This affects functions such as ",(0,o.jsx)(n.code,{children:"apktool"})," / ",(0,o.jsx)(n.code,{children:"sign"})," / ",(0,o.jsx)(n.code,{children:"run_jar"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"setdefault dalvik_memory 1000M  # Expand\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"import_addons-off",children:"import_addons (off)"}),"\n",(0,o.jsxs)(n.p,{children:["Import ",(0,o.jsx)(n.code,{children:".sh"})," files from ",(0,o.jsx)(n.code,{children:"META-INF/addons"})," (",(0,o.jsx)(n.code,{children:"on"})," or ",(0,o.jsx)(n.code,{children:"off"}),")."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"setdefault import_addons on  # Load all addons alphabetically\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"magisk_support-on",children:"magisk_support (on)"}),"\n",(0,o.jsxs)(n.p,{children:["Control Magisk usage: ",(0,o.jsx)(n.code,{children:"on"})," (dual mode), ",(0,o.jsx)(n.code,{children:"off"})," (recovery only), ",(0,o.jsx)(n.code,{children:"force"})," (Magisk only)."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"setdefault magisk_support off  # Use updater-script only\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"overwrite_symlinks-off",children:"overwrite_symlinks (off)"}),"\n",(0,o.jsxs)(n.p,{children:["Allow (",(0,o.jsx)(n.code,{children:"on"}),") or skip (",(0,o.jsx)(n.code,{children:"off"}),") symlink replacement during extractions with ",(0,o.jsx)(n.code,{children:"package_extract_file"})," and ",(0,o.jsx)(n.code,{children:"package_extract_dir"})," actions."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"setdefault overwrite_symlinks on\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"This control is designed solely to prevent unwanted replacements of the source files referenced by symlinks, ensuring that only the symlink itself is overwritten, and not the source file."})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"extraction_speed-5m",children:"extraction_speed (5M)"}),"\n",(0,o.jsxs)(n.p,{children:["Set extraction speed only when using these actions: ",(0,o.jsx)(n.code,{children:"update"})," / ",(0,o.jsx)(n.code,{children:"write_raw_image"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"setdefault extraction_speed 5M\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"ensure_rw-on",children:"ensure_rw (on)"}),"\n",(0,o.jsxs)(n.p,{children:["Require RW mounts (",(0,o.jsx)(n.code,{children:"on"}),") or allow RO (",(0,o.jsx)(n.code,{children:"off"}),")."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"setdefault ensure_rw off  # Allow read-only systems\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"off_readonly-",children:'off_readonly ("")'}),"\n",(0,o.jsxs)(n.p,{children:["It allows deactivation of the ",(0,o.jsx)(n.code,{children:"Read/Only"})," restriction for specific native functions or variables (specified by name, separated by ",(0,o.jsx)(n.code,{children:":"}),") during execution, enabling their replacement."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'setdefault off_readonly "TMP:ui_print"  # Allow its re-definition\r\n\r\nTMP="My custom value"\r\n\r\nui_print() {\r\n    echo My custom ui_print function\r\n}\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"permissions",children:"permissions"}),"\n",(0,o.jsx)(n.p,{children:"Permissions used by default in all native functions that alter/generate files or generate folders."}),"\n",(0,o.jsxs)(n.p,{children:["Default: ",(0,o.jsx)(n.code,{children:"0:0:0755:0644"}),"  (User:Group:Folder",":File",")"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'setdefault permissions "0:0:0755:0777"\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var i=s(6540);const o={},r=i.createContext(o);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);